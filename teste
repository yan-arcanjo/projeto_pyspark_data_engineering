# Projeto: Crypto Market Overview - Enterprise Data Pipeline
> **Pipeline de dados para anÃ¡lise de criptomoedas near real-time utilizando arquitetura cloud-native(Google Cloud Platform)**
<p align="center">
  <img  src="imagens/pipeline.png">
  <b>Fluxo de processo</b>
</p>


### ğŸ† Principais CaracterÃ­sticas

- **ğŸ”„ Pipeline Event-Driven**: OrquestraÃ§Ã£o via Airflow com triggers Pub/Sub
- **â˜ï¸ Cloud-Native**: 100% serverless utilizando Google Cloud Platform
- **ğŸ—ï¸ Arquitetura Medalion**: SeparaÃ§Ã£o clara de responsabilidades por camadas
- **ğŸ“Š Analytics AvanÃ§adas**: 4 anÃ¡lises estratÃ©gicas automatizadas
- **ğŸ” Near Real-Time Insights**: Dashboard interativo com dados atualizados
- **ğŸ›¡ï¸ Data Quality**: Transactions com Delta Lake para consistÃªncia de dados
- **ğŸ“ˆ Escalabilidade**: Processamento distribuÃ­do com Dataproc Serverless e Apache Spark

### ğŸ”§ Componentes da Arquitetura

| Componente | Tecnologia | FunÃ§Ã£o |
|------------|------------|--------|
| **Infraestrutura Cloud** | Google Cloud Platform| Plataforma principal de infraestrutura |
| **Linguagem principal** | Python| Principal linguagem de programaÃ§Ã£o | 
| **OrquestraÃ§Ã£o** | Composer - Apache Airflow | Agendamento e monitoramento da pipeline |
| **Messaging** | Google Pub/Sub | Event-driven triggers para Cloud Run |
| **API Gateway** | Cloud Run | ExtraÃ§Ã£o serverless de dados da API |
| **Data Lake** | Cloud Storage | Armazenamento de dados RAW (Bronze) |
| **Processing** | Dataproc Serverless | TransformaÃ§Ãµes distribuÃ­das com Spark |
| **Delta Lake** | Cloud Storage | Versionamento e transaÃ§Ãµes ACID |
| **Data Warehouse** | BigQuery | Consultas analÃ­ticas de alta performance |
| **Visualization** | Looker Studio | Dashboards interativos e insights |


## ğŸ¯ VisÃ£o Geral do Projeto

O **Crypto Market Overview** Ã© uma soluÃ§Ã£o completa de Data Engineering que consome dados da [API CoinCap](https://docs.coincap.io/) para gerar insights estratÃ©gicos sobre o mercado de criptomoedas. O projeto implementa uma **arquitetura medalion** (Bronze â†’ Silver â†’ Gold) utilizando tecnologias cloud-native para garantir escalabilidade, confiabilidade e performance.


## ğŸ—ï¸ Arquitetura da SoluÃ§Ã£o

### ğŸ“‚ CÃ³digos do Projeto
- ğŸ”— [Cloud Run - ExtraÃ§Ã£o API](1-cloud_function_get_data.py)
- ğŸ”— [PySpark Bronzeâ†’Silver](2-spark_processed_assats_list.py) 
- ğŸ”— [PySpark Silverâ†’Gold](3-spark_curated_analytics_full.py)
- ğŸ”— [Airflow DAG Principal](4-dag_assats-list-full.py)

---

### ğŸ”„ OrquestraÃ§Ã£o com Airflow
O Apache Airflow gerencia toda a execuÃ§Ã£o da pipeline, desde o trigger inicial atÃ© a finalizaÃ§Ã£o das anÃ¡lises.

<p align="center">
  <img src="imagens/airflow_dag.png">
  <br><b>Fluxo de execuÃ§Ã£o da DAG</b>
</p>

### â˜ï¸ ExtraÃ§Ã£o Serverless
O Cloud Run processa eventos do Pub/Sub e extrai dados da API CoinCap de forma completamente serverless.
Alimenta camada Bronze.

<p align="center">
  <img src="imagens/cloud_function.png">
  <br><b>ExecuÃ§Ã£o do Cloud Run</b>
</p>

### âš¡ Processamento DistribuÃ­do
O Dataproc Serverless executa jobs PySpark para criaÃ§Ã£o de camadas Silverâ†’Gold sem necessidade de gerenciar clusters.

<p align="center">
  <img src="imagens/jobs_dataproc_serveless.png">
  <br><b>ExecuÃ§Ã£o dos Jobs PySpark com Dataproc Serverless</b>
</p>

---

## ğŸ“Š Camadas de Dados (Medalion Architecture)

### ğŸ¥‰ Bronze Layer - Raw Data
- **Fonte**: API CoinCap REST v3
- **Formato**: JSON files com timestamp Ãºnico
- **LocalizaÃ§Ã£o**: `gs://coincap/raw/assets_list/`
- **AtualizaÃ§Ã£o**: Event-driven via Pub/Sub
- **RetenÃ§Ã£o**: HistÃ³rico completo para auditoria

### ğŸ¥ˆ Silver Layer - Processed Data  
- **Processamento**: Limpeza, tipagem e estruturaÃ§Ã£o
- **Formato**: Delta Tables particionadas
- **LocalizaÃ§Ã£o**: `gs://coincap/processed/assets_list/`
- **Features**: Schema evolution, time travel, ACID transactions
- **Qualidade**: ValidaÃ§Ãµes de integridade e consistÃªncia

### ğŸ¥‡ Gold Layer - Analytics Ready
- **AnÃ¡lises**: 4 visÃµes estratÃ©gicas automatizadas
- **Formato**: Delta Tables + BigQuery Tables
- **LocalizaÃ§Ã£o**: `gs://coincap/curated/{name_analytics}/` 
- **Outputs**: Datasets otimizados para consumo analÃ­tico

---

## ğŸ“ˆ AnÃ¡lises Implementadas

### ğŸ” Estrutura das Tabelas BigQuery
| AnÃ¡lise | DescriÃ§Ã£o |
|---------|-----------|
| **ğŸ“Š daily_overview** | Snapshot completo do mercado atual |
| **ğŸ“ˆ top_gainers_losers** | VariaÃ§Ãµes do dia |
| **ğŸ† market_dominance** | ParticipaÃ§Ã£o no mercado total |
| **âš–ï¸ supply_dynamics** | AnÃ¡lise de escassez e oferta |

### ğŸ“‹ Query Unificada para Dashboard
- ğŸ”— [SQL - Query Master para Looker Studio](5-sql_exportacao_de_dados_dashboard.sql)

O BigQuery atua como data warehouse principal, oferecendo consultas analÃ­ticas de alta performance para alimentar os dashboards.

<p align="center">
  <img src="imagens/bigquery.png">
  <br><b>Ambiente de consultas analÃ­ticas no BigQuery</b>
</p>



## ğŸ“Š Dashboard Final
Dashboard interativo com mÃ©tricas carregadas em near real-time, anÃ¡lises de mercado e insights estratÃ©gicos de criptomoedas.

<p align="center">
  <img src="imagens/dash_board.jpg">
  <br><b>Dashboard Looker Studio com anÃ¡lises em tempo real</b>
</p>

[Click e acesse a dashboard](https://lookerstudio.google.com/reporting/067747b1-5ffb-4076-ba08-aca53809d5f4) 

---

## ğŸ¯ ConclusÃ£o

Este projeto demonstra a implementaÃ§Ã£o de uma **pipeline de dados enterprise** completa, aplicando as melhores prÃ¡ticas de **Data Engineering** moderno. A soluÃ§Ã£o combina tecnologias de ponta como **Apache Spark**, **Delta Lake** e **arquitetura serverless** para criar um sistema robusto, escalÃ¡vel e eficiente.

### ğŸ† Principais Conquistas TÃ©cnicas:

- **âœ… Arquitetura Cloud-Native**: 100% serverless com auto-scaling e pay-per-use
- **âœ… Medalion Architecture**: SeparaÃ§Ã£o clara de responsabilidades por camadas
- **âœ… Event-Driven Design**: Pipeline reativa e eficiente com Pub/Sub
- **âœ… ACID Compliance**: ConsistÃªncia de dados garantida com Delta Lake
- **âœ… Analytics Automatizadas**: 4 anÃ¡lises estratÃ©gicas geradas automaticamente
- **âœ… Observabilidade**: Monitoramento completo via Cloud Logging e Airflow

### ğŸ“ˆ Valor de NegÃ³cio:

O sistema entrega **insights acionÃ¡veis** sobre o mercado de criptomoedas atravÃ©s de um dashboard interativo, permitindo anÃ¡lises de dominÃ¢ncia de mercado, identificaÃ§Ã£o de oportunidades (gainers/losers) e avaliaÃ§Ã£o de dinÃ¢micas de oferta e demanda. A arquitetura garante que os dados estejam sempre atualizados e confiÃ¡veis para tomada de decisÃµes estratÃ©gicas.

### ğŸš€ Impacto TÃ©cnico:

Esta implementaÃ§Ã£o serve como **referÃªncia** para pipelines de dados modernas, demonstrando como integrar mÃºltiplas tecnologias cloud para criar soluÃ§Ãµes empresariais robustas. O projeto evidencia conhecimento profundo em **Data Engineering**, **Cloud Architecture** e **Analytics**, aplicando padrÃµes de mercado utilizados por empresas de tecnologia de grande porte.